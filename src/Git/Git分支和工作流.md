# 分支

[git进行版本回退（文件恢复、恢复误提交、已提交）_git 回退-CSDN博客](https://blog.csdn.net/qing040513/article/details/109150075)

[点击跳转](https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%AE%80%E4%BB%8B)官方文档

注意：GIt中没有主分支的概念，初始分支会有个默认名称，这个初始分支与其他分支没有任何区别

## 提交对象

每次提交都会产生一个提交对象，代表了代码库的一个特定版本或快照，包含以下内容：

* 唯一标识：每个提交对象都有一个唯一的 SHA-1 哈希值，用于标识和检索特定的提交，确保提交对象的完整性和不可变性
* 元数据信息：每个提交对象包含了作者和提交者的姓名和电子邮件地址，以及提交的时间戳
* 提交消息：每个提交对象都包含了一条提交消息，用于描述提交的目的和所做的更改
* <span style="color: red">**父提交引用**</span>：提交对象还包含了一个或多个父提交的引用，通过这些引用可以构建代码库的版本历史，**形成一个有向无环图（DAG）的结构**
* 快照：提交对象包含了一组文件的状态，即代码库在某一时间点的快照，包括文件的内容和目录结构

## 分支与提交对象的关系

* 分支是指向提交对象的指针
* 创建新分支就是创建一个可以移动的新指针
* 在分支上进行提交时，将创建新的提交对象，同时分支将会指向这个新的提交对象

## HEAD指针

HEAD 指针是一个特殊的指针，指向当前所在分支

## 查看分支

```shell
git branch
	-a # 查看所有分支
```

> 创建一个新指针，并将HEAD指针指向这个新分支

## 创建分支

```shell
git branch <分支名>
```

> 将HEAD指针指向目标分支

## 切换分支

这是一个<span style="color: red">**危险操作**</span>，工作区会被改变，为提交的文件将会丢失

```shell
git checkout <分支名>
	-b # 创建并切换分支，如果分支重复会报错
```

## 合并分支

```shell
git merge <分支名>
```

> **注意：**是将指定分支合并至当前分支

## 重命名分支

```shell
# 重命名当前分支，名称重复会报错
git branch -m <新名称>
# 重命名指定分支，名称重复会报错
git branch -m <指定分支的名称> <新名称>

# 强制重命名当前分支（危险操作）
git branch -m -f <新名称>
git branch -M <新名称>
# 强制重命名指定分支（危险操作）
git branch -m -f <指定分支的名称> <新名称>
git branch -M <指定分支的名称> <新名称>
```

## 删除分支

```shell
git branch -d <分支名>
```

> 强制删除分支：git branch -D <分支名>

## 拉取远程的分支，但本地不切换分支（IDEA不支持这个操作）

```shell
git fetch origin remote_branch_name:local_branch_name
```

# 工作流